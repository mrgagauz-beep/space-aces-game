#### РС‚РµСЂР°С†РёСЏ 2 вЂ” 2025-11-16 вЂ” Р”РѕРєСѓРјРµРЅС‚Р°С†РёСЏ Рё handoff

- Р§С‚Рѕ РґРµР»Р°Р»Рё:
  - РЎС‡РёС‚Р°Р» Рё РїРѕРґС‡РёСЃС‚РёР» РёСЃС…РѕРґРЅС‹Р№ С‚РµС…РїР»Р°РЅ (PDF) РїРѕ Р±РѕС‚Сѓ Space Aces.
  - РЎРѕР±СЂР°Р» СЂР°СЃС€РёСЂРµРЅРЅС‹Р№ С‚РµС…РґРѕРє: РёСЃС…РѕРґРЅС‹Р№ РїР»Р°РЅ + РёРіСЂРѕРІС‹Рµ РјРµС…Р°РЅРёРєРё + РґРµС‚РµРєС‚РѕСЂС‹ + Flee/Death-Р»РѕРіРёРєР°.
  - Р¤РѕСЂРјР°Р»РёР·РѕРІР°Р»Рё РїСЂРѕС†РµСЃСЃ СЂР°Р±РѕС‚С‹ С‚РѕР»СЊРєРѕ С‡РµСЂРµР· Codex/РєРѕРґ-РјРѕРґРµР»СЊ (Р±РµР· СЂСѓС‡РЅС‹С… РїСЂР°РІРѕРє).
  - РћР±РЅРѕРІРёР»Рё CONTEXT_SNAPSHOT Рё РїРѕРґРіРѕС‚РѕРІРёР»Рё СЃС‚СЂСѓРєС‚СѓСЂСѓ handoff (РїРµСЂРµРµР·Рґ РјРµР¶РґСѓ С‡Р°С‚Р°РјРё).

- Р РµР·СѓР»СЊС‚Р°С‚:
  - Р•СЃС‚СЊ РµРґРёРЅС‹Р№ `space_aces_tech_plan_full` СЃ С‚РµС…РЅРёС‡РµСЃРєРѕР№ Р°СЂС…РёС‚РµРєС‚СѓСЂРѕР№, РјРµС…Р°РЅРёРєР°РјРё РёРіСЂС‹ Рё С‚РµРєСѓС‰РёРј СЃС‚Р°С‚СѓСЃРѕРј.
  - РџСЂРѕС†РµСЃСЃ СЂР°Р·СЂР°Р±РѕС‚РєРё Р·Р°С„РёРєСЃРёСЂРѕРІР°РЅ: РєРѕСЂРѕС‚РєРёРµ РёС‚РµСЂР°С†РёРё, РІСЃРµ РёР·РјРµРЅРµРЅРёСЏ вЂ” С‡РµСЂРµР· Codex, РєР°Р¶РґС‹Р№ С€Р°Рі СЃРѕРїСЂРѕРІРѕР¶РґР°РµС‚СЃСЏ `--mode test` Рё Р»РѕРіРёСЂРѕРІР°РЅРёРµРј.
  - РћРїСЂРµРґРµР»РµРЅС‹ Р±Р»РёР¶Р°Р№С€РёРµ С€Р°РіРё: ROI + player_mm в†’ РЅР°РІРёРіР°С†РёСЏ в†’ HP/Shield + FLEE/SAFE в†’ self-test/РјРµС‚СЂРёРєРё.

- РќРµСЂРµС€С‘РЅРЅС‹Рµ РІРѕРїСЂРѕСЃС‹:
  - ROI РіР»Р°РІРЅРѕРіРѕ РѕРєРЅР°/РјРёРЅРёРєР°СЂС‚С‹ РЅСѓР¶РґР°РµС‚СЃСЏ РІ РїРµСЂРµРєР°Р»РёР±СЂРѕРІРєРµ (РµСЃС‚СЊ Р°СЂС‚РµС„Р°РєС‚С‹ В«СЌРєСЂР°РЅ РІ СЌРєСЂР°РЅРµВ»).
  - Р”РµС‚РµРєС‚РѕСЂ `player_mm` РІСЃС‘ РµС‰С‘ РЅРµСЃС‚Р°Р±РёР»РµРЅ (С‡Р°СЃС‚РѕРµ `None` РІ Р»РѕРіР°С…).
  - РќР°РІРёРіР°С†РёСЏ РїРѕ РјРёРЅРёРєР°СЂС‚Рµ Рё Flee-Р»РѕРіРёРєР° РЅРµ РїСЂРѕРІРµСЂРµРЅС‹ end-to-end.
  - РќРµ Р·Р°РІРµСЂС€РµРЅР° РёРЅС‚РµРіСЂР°С†РёСЏ РїР°СЂСЃРёРЅРіР° HP/Shield РІ FSM Рё РїРѕСЂРѕРіРѕРІ FLEE/SAFE.

- РЎР»РµРґСѓСЋС‰РёРµ С€Р°РіРё:
  1. Р—Р°РїСѓСЃС‚РёС‚СЊ `tools/roi_calibrator` Рё Р·Р°С„РёРєСЃРёСЂРѕРІР°С‚СЊ РєРѕСЂСЂРµРєС‚РЅС‹Рµ ROI MAIN/MINIMAP.
  2. Р”РѕРІРµСЃС‚Рё `find_player_crosshair` РґРѕ СЃС‚Р°Р±РёР»СЊРЅРѕРіРѕ `player_mm` Рё РґРѕР±Р°РІРёС‚СЊ РїР°РјСЏС‚СЊ РїРѕСЃР»РµРґРЅРµР№ РїРѕР·РёС†РёРё.
  3. Р’ FARMING РІРєР»СЋС‡РёС‚СЊ РЅР°РІРёРіР°С†РёСЋ: РїРѕРґР»С‘С‚ РїРѕ РјРёРЅРёРєР°СЂС‚Рµ, Р·Р°С‚РµРј engage РїРѕ Р»РµР№Р±Р»Р°Рј.
  4. РџРѕРґРєР»СЋС‡РёС‚СЊ HUD (HP/Shield) Рё СЂРµР°Р»РёР·РѕРІР°С‚СЊ FLEE/IN_SAFE/COOLDOWN РІ FSM.
  5. РќР°СЃС‚СЂРѕРёС‚СЊ self-test (СЃРєСЂРёРЅС€РѕС‚С‹, РјРµС‚СЂРёРєРё Recall/FPR Рё С‚Р°Р№РјРёРЅРіРё) Рё Р»РѕРіРёСЂРѕРІР°РЅРёРµ РІ `trace.csv`.
#### Итерация 2 — 2025-11-16 — Документация и handoff

- Что делали:
  ...

- Результат:
  ...

- Нерешённые вопросы:
  ...

- Следующие шаги:
  ...

Итерация 3  2025-11-16  Техплан, механики и handoff-подготовка

Что делали:

Считали исходный PDF-техплан по Space Aces, убрали артефакты разметки (страницы, одиночные номера, мусорные переносы).

Собрали расширенный техдок space_aces_tech_plan_full: исходный план + детальное описание игровых механик, детекторов (MINIMAP/MAIN), боевой логики (FARMING, FLEE, SAFE, Death/Respawn).

Формализовали архитектуру проекта: модули vision, navigation, FSM (FARMING/FLEEING/IN_SAFE/COOLDOWN/DEAD), controls, tools, config/profiles.

Зафиксировали процесс разработки: короткие итерации, все правки только через Codex/код-модель, с обязательными логами и self-test.

Обновили CONTEXT_SNAPSHOT под актуальный фокус и подготовили текстовый handoff-пакет для переезда между чатами.

Результат:

Есть единый техплан, который связывает:

архитектуру модулей,

механику игры (управление, SAFE, flee, death/cooldown),

текущую реализацию детекторов,

целевой FSM и навигацию по миникарте.

В CONTEXT_SNAPSHOT зафиксированы:

текущий статус по vision/navigation/FSM,

блокеры (ROI + нестабильный player_mm),

фокус следующих итераций (ROI  навигация  FLEE/SAFE  self-test).

Подготовлен handoff-формат (snapshot + последние итерации + next steps + key decisions), чтобы безболезненно переезжать в новые чаты внутри проекта.

Нерешённые вопросы:

ROI главного окна и миникарты до сих пор не перекалиброваны до финального состояния (возможны артефакты экран в экране).

Детектор игрока на миникарте (player_mm) нестабилен, что блокирует полноценную навигацию.

FLEE/SAFE/COOLDOWN и Death/Respawn описаны, но не реализованы end-to-end в FSM.

Self-test и метрики (Recall/FPR/тайминги) пока только в планах; нет автоматизированной проверки.

Следующие шаги:

Через Codex подготовить и запустить tools/roi_calibrator, записать корректные ROI MAIN/MINIMAP в профили.

Упростить и стабилизировать find_player_crosshair (player_mm), добавить хранение последней позиции в FSM.

Включить в FARMING навигацию по миникарте: выбор ближайшего врага  подлёт (80%)  engage по лейблам (Z/X).

Завершить парсинг HUD (HP/Shield), внедрить FLEE/IN_SAFE/COOLDOWN/DEAD в FSM.

Настроить self-test (скриншоты, эталонные ответы) и логирование метрик в trace.csv.
